#!/usr/bin/env bash
# CerebroCortex REST API launcher
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
VENV_PYTHON="${SCRIPT_DIR}/venv/bin/python"
export CEREBRO_DATA_DIR="${CEREBRO_DATA_DIR:-${SCRIPT_DIR}/data}"

# Use venv if available, fall back to system python
if [ -x "$VENV_PYTHON" ]; then
    exec "$VENV_PYTHON" -m cerebro.interfaces.api_server "$@"
else
    export PYTHONPATH="${SCRIPT_DIR}/src:${PYTHONPATH:-}"
    exec python3 -m cerebro.interfaces.api_server "$@"
fi
